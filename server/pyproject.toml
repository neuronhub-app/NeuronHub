[project]

name = "neuronhub"
version = "0.0.0.0"
description = ""
requires-python = "~=3.13"
dependencies = [
    # django
    "django == 5.2.*",
    "django-allauth == 65.*",
    "django-anymail == 13.*",
    "django-cors-headers == 4.*",
    "django-fieldsignals == 0.*",
    "django-health-check == 3.*",
    "django-simple-history == 3.*",
    "django-countries == 7.*",
    "dj-database-url == 3.*",
    "django-extensions == 4.*",
        "ipython == 9.*",
    "strawberry-graphql ~= 0.274.0",
        "strawberry-graphql-django ~= 0.62.0",
    "django-stubs[compatible-mypy] == 5.*",

    # django fields
    "django-choices-field == 2.*",
    "django-timezone-field == 7.*",

    # django admin
    "django-admin-sortable2 == 2.*",
    "django-admin-autocomplete-filter == 0.7.*",
    "django-adminutils ~= 0.0.28",
    "django-select2-admin-filters == 0.1.*",
        "django-select2 == 8.*",
    "django-codemirror2 == 0.2.*",
    "django-hijack == 3.*",
    "django-object-actions == 5.*",
    "django-debug-toolbar == 5.*",

    # server
    "daphne == 4.*",
    "whitenoise == 6.*",
    "psycopg[binary] == 3.*",

    # utils
    "python-dateutil == 2.*",
    "python-dotenv == 1.*",
    "python-environ == 0.4.*",
    "humanize == 4.*",
    "markdownify == 1.*",
    "rich == 14.*",
    "sentry-sdk == 2.*",
]


[tool.uv]

dev-dependencies = [
    "ruff == 0.12.*",
    "faker == 37.*",
    "objprint == 0.*",
    "pip == 25.*",
    "wat == 0.6.*",
    "pytest == 8.*",
        "pytest-django == 4.*",
        "pytest-mock == 3.*",
        "pytest-pspec ~= 0.0.4",
        "pytest-rich == 0.*",
]


[tool.mypy]
    python_version = "3.13"
    plugins = ["mypy_django_plugin.main"]
    explicit_package_bases = true
    ignore_missing_imports = true
    implicit_optional = true
    show_error_codes = true

[[tool.mypy.overrides]]
    module = "*.migrations.*"
    ignore_errors = true

[[tool.mypy.overrides]]
    module = "*.settings"
    ignore_errors = true

[[tool.mypy.overrides]]
    module = [
        "allauth.*",
        "wat.*",
        "faker.*",
    ]
    ignore_missing_imports = true
    ignore_errors = true

[[tool.mypy.overrides]]
    # wat package is unlintable
    module = "neuronhub.apps.tests.utils"
    ignore_errors = true


[tool.django-stubs]
    django_settings_module = "neuronhub.settings"


[tool.ruff]
    line-length = 97


[tool.ruff.lint.isort]

force-single-line = true
lines-after-imports = 2
known-first-party = ["neuronhub"]


[tool.ruff.lint]

extend-select = [
    "UP",  # pyupgrade: enforce modern python syntax
]
ignore = [
    # "drop unused vars", don't want as they're used as links/docs
    "F841",
    # 2 rules for multi-line string indent - sounds useless,
    # use textwrap.dedent() - it's your responsibility. and flake8's fault for not detecting dedent()
    "W291",
    "W293",
]


[tool.pytest.ini_options]

DJANGO_SETTINGS_MODULE = "neuronhub.settings"
python_files = ["*__test.py"]
addopts = [
    "--no-migrations",
    "--capture=no", # show print() stdout
    "--color=yes",
    "--code-highlight=yes",
    "--no-header",
    "--pspec", # allows to use docstrings instead of test function names
]
filterwarnings = [
    "ignore::DeprecationWarning:environ.compat",
    "ignore::DeprecationWarning:functools",
]
